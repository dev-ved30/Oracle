

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>oracle.visualization module &mdash; oracle 1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=29a6c3e3"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            oracle
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">oracle</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">oracle.visualization module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/source/oracle.visualization.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-oracle.visualization">
<span id="oracle-visualization-module"></span><h1>oracle.visualization module<a class="headerlink" href="#module-oracle.visualization" title="Link to this heading"></a></h1>
<p>Module for visualization functions in the ORACLE framework.</p>
<dl class="py function">
<dt class="sig sig-object py" id="oracle.visualization.plot_average_performance_over_all_phases">
<span class="sig-prename descclassname"><span class="pre">oracle.visualization.</span></span><span class="sig-name descname"><span class="pre">plot_average_performance_over_all_phases</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metric</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metrics_dictionary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#oracle.visualization.plot_average_performance_over_all_phases" title="Link to this definition"></a></dt>
<dd><p>Plot the average performance over all phases for the specified metric.</p>
<p>This function iterates over a dictionary of metrics grouped by different depths. For each depth,
it extracts the row corresponding to a specified metric (e.g., ‘macro avg’) from a pandas DataFrame,
plots the metric values against the days from first detection on a logarithmic x-scale, and either
displays the plot interactively or saves it to a file in the specified directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>metric</strong> (<em>str</em>) – The performance metric to be plotted. This is used to label the y-axis and is printed along with the plot data.</p></li>
<li><p><strong>metrics_dictionary</strong> (<em>dict</em>) – A dictionary where each key corresponds to a depth level and each value is a pandas DataFrame.
The DataFrame should contain metric rows (e.g., ‘macro avg’) with its index representing days from first detection and
the row values representing the metric values.</p></li>
<li><p><strong>model_dir</strong> (<em>str</em><em>, </em><em>optional</em>) – Directory in which to save the generated plot as a PDF file under the subdirectory ‘plots’.
If None, the plot is displayed interactively using plt.show(). Defaults to None.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>All existing matplotlib figures are closed at the beginning to prevent overlapping.</p></li>
<li><p>The plot style is set to ‘default’.</p></li>
<li><p>The x-axis uses a logarithmic scale and its ticks are set based on the days from first detection.</p></li>
<li><p>A legend is added to the lower right of the plot.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="oracle.visualization.plot_class_wise_performance_over_all_phases">
<span class="sig-prename descclassname"><span class="pre">oracle.visualization.</span></span><span class="sig-name descname"><span class="pre">plot_class_wise_performance_over_all_phases</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metric</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metrics_dictionary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#oracle.visualization.plot_class_wise_performance_over_all_phases" title="Link to this definition"></a></dt>
<dd><p>Plots class-wise performance over all phases for a given metric.</p>
<p>This function iterates over each depth level present in the metrics_dictionary,
extracts class-specific metric values (ignoring summary rows such as ‘accuracy’,
‘macro avg’, and ‘weighted avg’), and plots these values against the days from
the first detection. The x-axis is set to a logarithmic scale.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>metric</strong> (<em>str</em>) – The name of the performance metric to be displayed on the y-axis.</p></li>
<li><p><strong>metrics_dictionary</strong> (<em>dict</em>) – A dictionary where each key represents a depth level and
its corresponding value is a pandas DataFrame. The DataFrame should have its rows
indexed by class names (with some entries like ‘accuracy’, ‘macro avg’, and
‘weighted avg’ to be skipped) and columns representing days from the first detection.</p></li>
<li><p><strong>model_dir</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – The directory path where the plot PDFs will be saved.
If provided, each plot is saved as ‘class_wise_{metric}.pdf’ in a subdirectory.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="oracle.visualization.plot_confusion_matrix">
<span class="sig-prename descclassname"><span class="pre">oracle.visualization.</span></span><span class="sig-name descname"><span class="pre">plot_confusion_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'true'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#oracle.visualization.plot_confusion_matrix" title="Link to this definition"></a></dt>
<dd><p>Plot a confusion matrix using the given true and predicted labels and display it with matplotlib.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>y_true</strong> (<em>array-like</em>) – Array of true labels.</p></li>
<li><p><strong>y_pred</strong> (<em>array-like</em>) – Array of predicted labels corresponding to y_true.</p></li>
<li><p><strong>labels</strong> (<em>list</em>) – List of label names to be used in the confusion matrix.</p></li>
<li><p><strong>normalize</strong> (<em>str</em><em>, </em><em>optional</em>) – Normalization mode for the confusion matrix. Default is ‘true’.
Accepted values are typically ‘true’, ‘pred’, or ‘all’.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of the plot; if provided, it will be set on the plot.</p></li>
<li><p><strong>img_file</strong> (<em>str</em><em>, </em><em>optional</em>) – File path to save the generated plot image. If None, the plot is not saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The function filters out any entries where the true label is None.</p></li>
<li><p>It adjusts the figure size and text properties based on the number of classes.</p></li>
<li><p>The function closes all previous matplotlib figures at the start and closes the plot at the end.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="oracle.visualization.plot_plain_cf">
<span class="sig-prename descclassname"><span class="pre">oracle.visualization.</span></span><span class="sig-name descname"><span class="pre">plot_plain_cf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'true'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#oracle.visualization.plot_plain_cf" title="Link to this definition"></a></dt>
<dd><p>Plot a plain confusion matrix visualization based on true and predicted labels.
This function computes and displays a confusion matrix for the provided true and
predicted labels using a predefined style. It only considers entries in y_true that
are not None. The resulting confusion matrix is displayed without tick marks or spines,
and can optionally be saved to an image file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>y_true</strong> (<em>array-like</em>) – Array of true labels. Only the elements that are not None are used.</p></li>
<li><p><strong>y_pred</strong> (<em>array-like</em>) – Array of predicted labels corresponding to y_true.</p></li>
<li><p><strong>labels</strong> (<em>array-like</em>) – The set of labels to index the confusion matrix.</p></li>
<li><p><strong>normalize</strong> (<em>str</em><em>, </em><em>optional</em>) – Normalization method for the confusion matrix (e.g., ‘true’).
Defaults to ‘true’.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of the plot. (Currently not utilized in the function.)</p></li>
<li><p><strong>img_file</strong> (<em>str</em><em>, </em><em>optional</em>) – If provided, the plot is saved to this file path.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="oracle.visualization.plot_roc_curves">
<span class="sig-prename descclassname"><span class="pre">oracle.visualization.</span></span><span class="sig-name descname"><span class="pre">plot_roc_curves</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">probs_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probs_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#oracle.visualization.plot_roc_curves" title="Link to this definition"></a></dt>
<dd><p>Plot ROC curves for each class and compute the macro-average ROC curve.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>probs_true</strong> (<em>ndarray</em>) – A 2D array of shape (n_samples, n_classes) containing the ground truth binary labels for each class.
Rows with all-zero values (indicating missing true labels) are removed before plotting.</p></li>
<li><p><strong>probs_pred</strong> (<em>ndarray</em>) – A 2D array of shape (n_samples, n_classes) containing the predicted probabilities for each class.</p></li>
<li><p><strong>labels</strong> (<em>list</em><em> of </em><em>str</em>) – A list of class labels corresponding to the columns in probs_true and probs_pred.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of the ROC plot. Defaults to None.</p></li>
<li><p><strong>img_file</strong> (<em>str</em><em>, </em><em>optional</em>) – File path to save the plot image. If None, the plot is not saved to a file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The ROC curves are plotted with an equal aspect ratio, and a legend is included showing the AUC for each class
along with the macro-average AUC.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="oracle.visualization.plot_train_val_history">
<span class="sig-prename descclassname"><span class="pre">oracle.visualization.</span></span><span class="sig-name descname"><span class="pre">plot_train_val_history</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_loss_history</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_loss_history</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#oracle.visualization.plot_train_val_history" title="Link to this definition"></a></dt>
<dd><p>Plot the training and validation loss curves along with their rolling averages on a logarithmic scale.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_loss_history</strong> (<em>list</em><em> or </em><em>array-like</em>) – The history of training loss values.</p></li>
<li><p><strong>val_loss_history</strong> (<em>list</em><em> or </em><em>array-like</em>) – The history of validation loss values.</p></li>
<li><p><strong>file_name</strong> (<em>str</em>) – The file path where the generated plot will be saved.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="oracle.visualization.plot_umap">
<span class="sig-prename descclassname"><span class="pre">oracle.visualization.</span></span><span class="sig-name descname"><span class="pre">plot_umap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embeddings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">classes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bts_classes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#oracle.visualization.plot_umap" title="Link to this definition"></a></dt>
<dd><p>Plot UMAP projection of embeddings.
This function computes a 2D UMAP projection from high-dimensional embeddings and generates both a
static scatter plot using matplotlib and an interactive scatter plot using plotly. Points in the plots
are colored based on the provided classes. If a model directory is specified, the plots are saved
to disk; otherwise, the static plot is displayed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>embeddings</strong> (<em>array-like</em>) – High-dimensional feature data (e.g., a numpy array) with shape (n_samples, n_features).</p></li>
<li><p><strong>classes</strong> (<em>array-like</em>) – Class labels for each embedding, used for color-coding the points in the plot.</p></li>
<li><p><strong>id</strong> (<em>array-like</em>) – Unique identifiers for each source, used for hover information in the interactive plot.</p></li>
<li><p><strong>bts_classes</strong> (<em>array-like</em>) – Additional class information for tooltips in the interactive plot.</p></li>
<li><p><strong>d</strong> (<em>int</em><em> or </em><em>str</em>) – Identifier (e.g., number of days or a delay parameter) used in the plot title and file names.</p></li>
<li><p><strong>model_dir</strong> (<em>str</em><em>, </em><em>optional</em>) – Directory where the plots will be saved. If None, the static plot is shown instead.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Exceptions from UMAP</strong><strong>, </strong><strong>matplotlib</strong><strong>, or </strong><strong>plotly if issues occur during the transformation</strong><strong> or </strong><strong>plotting process.</strong> – </p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Ved Shah.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>